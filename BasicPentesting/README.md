# Basic Pentesting
TryHackMe Live Room

## Info
**Title**  
Web App Testing


**Created By**  
[asho](https://tryhackme.com/p/ashu)

**Link**  
[here](https://tryhackme.com/room/basicpentestingjt)



## First Impression
The machine runs a web server on port 80. A `GET` request returns a simple headline `Undergoing maintenance`.

While checking the page source I found a suspicious comment `<!-- Check our dev note section if you need to know what to work on. -->
`.

## Scanning
I found an `apache tomcat` server running on port 8080. The apache version is `9.0.7` which seems safe, as `searchsploit` found only exploits related to `tomcat < 9.0.1`. Exploit-db has no exploits either.
```
22/tcp    open     ssh
80/tcp    open     http
139/tcp   open     netbios-ssn
445/tcp   open     microsoft-ds
8009/tcp  open     ajp13
8080/tcp  open     http-proxy
```
Dirbuster found a "hidden" development directory under `/development/`. I found some more sensitive information:

* K uses the version `2.5.12` of some service (`nmap` aggressive will be useful here).
* K configured SMB
* J set up apache
* K's message to J telling him that he went over the credentials under `/etc/shadow` and found J's password very weak, asking him to improve it according to the password policy (K cracked J's hash very quickly, according to the text).

Following [this](https://null-byte.wonderhowto.com/how-to/enumerate-smb-with-enum4linux-smbclient-0198049/) article  I enumerated `SMB` while running an aggressive scan.


## Enumeration
Since K configured `SMB`, I enumerated using `enum4linux`. I found a password policy that might be helpful.


While searching for users, `enum4linux` enumerated using different `SIDS`. When enumerating using `SID S-1-22-1`, the program found the Unix users **kay** and **jan**. Luckily, the users match the signatures inside the development logs (**K** and **J**).

We can then extract the `rockyou` list under `/usr/share/wordlists` and bruteforce the server using `hydra`. The machine creator chose an easy password, the process took only 30 seconds. Now I have remote access.

```
[STATUS] 393.00 tries/min, 393 tries in 00:01h, 14344082 to do in 608:19h, 48 active
[22][ssh] host: 10.10.46.191   login: jan   password: armando
```

After going over the machine I found the `.ssh` directory of `kay` which I was able to read. I googled `ssh crack private key` and by following [this](https://infosecwriteups.com/cracking-ssh-private-key-passphrase-459ba17e8d5d) article I was able to crack the password. Then I connected to the remote host as kay: `sudo ssh -i id_rsa kay@10.10.46.191 `. 

Finally, I had to remove the `bak` extension from the password backup file to read its data.


## Credits
Ori David  
John Hammond [here](https://tryhackme.com/room/basicpentestingjt)


## Contact
orid2004@gmail.com
